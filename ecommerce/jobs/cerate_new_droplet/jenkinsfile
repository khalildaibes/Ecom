pipeline {
    agent any
    environment {
        LANG = 'en_US.UTF-8'
        LC_ALL = 'en_US.UTF-8'
        PYTHON_PATH = '/path/to/python3'
        PYTHON_SCRIPT = "${WORKSPACE}/ecommerce/jobs/cerate_new_droplet/cerate_new_droplet.py"
    }
    parameters {
        string(name: 'PROJECT_NAME', defaultValue: 'MyProject', description: 'Name of the project')
        choice(name: 'REGION', choices: ['New York', 'San Francisco', 'Amsterdam', 'Singapore', 'London', 'Frankfurt', 'Toronto', 'Bangalore', 'Sydney'], description: 'Choose Region')
        string(name: 'DROPLET_NAME', defaultValue: 'example-droplet', description: 'Name of the Droplet')
        string(name: 'DROPLET_SIZE', defaultValue: 's-2vcpu-2gb', description: 'Size of the Droplet')
        string(name: 'IMAGE', defaultValue: 'ubuntu-20-04-x64', description: 'Operating system image for the Droplet')
    }
    stages {
        stage('Execute Python Script') {
            steps {
                withCredentials([
                    string(credentialsId: 'github-pat', variable: 'GITHUB_TOKEN'),
                    string(credentialsId: 'sanityadmintoken', variable: 'SANITY_AUTH_TOKEN'),
                    string(credentialsId: 'openaikey', variable: 'OPEN_AI_KEY'),
                    string(credentialsId: 'VercelToken', variable: 'VERCEL_TOKEN'),
                    string(credentialsId: 'JENKINS_API_TOKEN', variable: 'JENKINS_TOKEN'),
                    string(credentialsId: 'digitalOceanToken', variable: 'DO_TOKEN')
                ]) {
                    script {
                        // Call the Python script to execute tasks
                        bat """python ${PYTHON_SCRIPT} ^
                        --PROJECT_NAME "${params.PROJECT_NAME}" ^
                        --REGION "${params.REGION}" ^
                        --DROPLET_NAME "${params.DROPLET_NAME}" ^
                        --DROPLET_SIZE "${params.DROPLET_SIZE}" ^
                        --IMAGE "${params.IMAGE}"
                        """
                    }
                }
            }
        }
    }
}
